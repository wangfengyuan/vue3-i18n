"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue");const t=Symbol("i18n"),n=(e,t,r)=>{const o=e[0];if(~o.indexOf("[")){const[l,s]=o.split("["),a=parseInt(s.replace("]",""));if(a>-1){if(!t[l]&&t[l].length>0&&t[l][a]&&""!==t[l][a])throw new Error("Not Found");return 1===e.length?"string"==typeof t[l][a]?t[l][a]:"":n(e.slice(1),t[l][a],r)}throw new Error(`Not Found: ${o}`)}if(t[e[0]]||""===t[e[0]]){if(1===e.length){let n="string"==typeof t[e[0]]?t[e[0]]:"";return r&&(n=((e,t)=>{const n=/{(\w*)}/g;let r,o=e;for(;null!==(r=n.exec(e));){if(console.log(r),!Object.prototype.hasOwnProperty.call(t,r[1]))throw new Error(`Not Found Params: ${r[1]}`);o=o.replace(r[0],t[r[1]])}return o})(n,r)),n}return n(e.slice(1),t[e[0]],r)}throw new Error("Not Found")};exports.createI18n=r=>{const o=e.ref(r.locale||"en"),l=r.messages;return{messages:l,t:(e,t)=>{const r=l[o.value]||l.en;if("string"!=typeof e)return console.warn("Warn(i18n):","keypath must be a type of string"),"";try{return n(e.split("."),r,t)}catch(t){return console.log(t),console.warn(`Warn(i18n): the keypath '${e}' not found`),""}},setLocale:e=>{l[e]||console.warn(`Warn(i18n): the '${e}' language pack not found, fall back to English language pack`),o.value=e},getLocale:()=>o.value,install(e){const n=this;e.provide(t,n),e.config.globalProperties.$t=n.t,e.config.globalProperties.$i18n=n}}},exports.i18nSymbol=t,exports.useI18n=function(){return e.inject(t)};
